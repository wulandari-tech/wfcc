<%- include('partials/header', { title: title }) %>

<div class="page-container">
    <h1><i class="fas fa-laptop-code"></i> Code Examples & Snippets</h1>
    <p>Here you can find examples of how to integrate with our APIs using various programming languages.</p>

    <div class="card">
        <div class="card-header">Example: Fetching Promos with JavaScript (Fetch API)</div>
        <pre><code class="language-javascript">
async function fetchPromos() {
  try {
    const response = await fetch('/api/promos');
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const data = await response.json();
    if (data.success) {
      console.log('Promos:', data.data);
      // Process your promos here
    } else {
      console.error('Failed to fetch promos:', data.message);
    }
  } catch (error) {
    console.error('Error fetching promos:', error);
  }
}

fetchPromos();
        </code></pre>
    </div>

    <div class="card">
        <div class="card-header">Example: Using Gemini AI Endpoint with JavaScript (Fetch API)</div>
        <pre><code class="language-javascript">
async function callGeminiAPI(promptText, apiKey) {
  const endpoint = `/api/ai/gemini?prompt=${encodeURIComponent(promptText)}&apikey=${apiKey}`;
  try {
    const response = await fetch(endpoint);
    const data = await response.json();

    if (data.success) {
      console.log('Gemini AI Response:', data.data);
      // Display data.data.answer or other relevant fields
    } else {
      console.error('Gemini API Error:', data.message || data.error.message);
    }
  } catch (error) {
    console.error('Error calling Gemini API:', error);
  }
}

// const userPrompt = "What is the capital of France?";
// const userApiKey = "YOUR_API_KEY_HERE"; // Replace with a valid API key
// if (userApiKey !== "YOUR_API_KEY_HERE") {
//   callGeminiAPI(userPrompt, userApiKey);
// } else {
//   console.warn("Please replace YOUR_API_KEY_HERE with a valid API key to test.");
// }
        </code></pre>
        <p class="mt-1"><strong>Note:</strong> Replace <code>"YOUR_API_KEY_HERE"</code> with a valid API key obtained after registration and (if required by admin) activation.</p>
    </div>

    <p class="mt-2">More examples for Python, PHP, etc., will be added soon!</p>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<style>
    pre[class*="language-"] {
        padding: 1em;
        margin: .5em 0;
        overflow: auto;
        border-radius: 0.3em;
        background: #2d2d2d; /* Prism Tomorrow Night default */
    }
</style>

<%- include('partials/footer') %>